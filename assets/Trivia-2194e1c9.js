import{r as l,j as r}from"./index-405f677d.js";import{useGameContext as B}from"./Game-25172bd2.js";const N=e=>{const s=document.createElement("div");return s.innerHTML=e,s.textContent},k=({question:e})=>r.jsx("div",{className:"bg-zinc-700 drop-shadow-md text-zinc-100 m-6 rounded-lg min-w-fit w-56 text-2xl",children:r.jsx("h2",{className:"m-5 text-center",children:e&&N(e)})}),Q=l.memo(k),C=e=>Math.floor(Math.random()*e),_=e=>{const s=new Set,n=[];for(let c=0;c<e.length;c++){let o=C(e.length);for(;s.has(o);)o=C(e.length);s.add(o),n.push(e[o])}return n};let S=[],P=["yellow","lime","cyan","rose"];const A={yellow:"bg-yellow-500 text-yellow-900 hover:bg-yellow-300",lime:"bg-lime-500 text-lime-900 hover:bg-lime-300",cyan:"bg-cyan-500 text-cyan-900 hover:bg-cyan-300",rose:"bg-rose-500 text-rose-900 hover:bg-rose-300"},E=({question:e,nextB:s,setNextB:n,block:c,setBlock:o,setCorrect:d,setP1Score:a,setP2Score:i,setP1Lifes:h,setP2Lifes:w,playing:m,setPlaying:p,setLose:f,mode:u})=>{S=s?S:e&&_([...e.incorrect_answers,e.correct_answer]),P=s?P:e&&_(["yellow","lime","cyan","rose"]);const g=()=>{f(!0),n(!1)},j=()=>{d(!0),o(!0),m===!1&&a(t=>t+1),u===2&&m===!0&&i(t=>t+1),u===2&&p(!m),n(!0)},x=()=>{d(!1),o(!0),u===2&&p(!m),m?w(t=>(t=t-1,t>0?n(!0):g(),t)):h(t=>(t=t-1,t>0?n(!0):g(),t))},v=t=>{t===(e==null?void 0:e.correct_answer)&&!c&&j(),t!==(e==null?void 0:e.correct_answer)&&!c&&x()};return r.jsx("div",{className:"grid grid-cols-2 items-end",children:e&&S.map((t,b)=>r.jsx(z,{className:`drop-shadow-md min-wit-full rounded-md px-4 m-3 h-5/6 ${A[P[b]]} text-2xl md:p-6`,change:v,answ:t},b))})},z=({className:e,change:s,answ:n})=>r.jsx("button",{className:e,onClick:()=>s(n),children:N(n)}),M=l.memo(E),R=()=>{const{question:e,nextB:s,setNextB:n,block:c,setBlock:o,setCorrect:d,setP1Score:a,setP2Score:i,p1Lifes:h,setP1Lifes:w,p2Lifes:m,setP2Lifes:p,playing:f,setPlaying:u,lose:g,setLose:j,mode:x}=L();return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${e?"hidden":void 0} flex flex-col justify-center items-center bg-stone-100 rounded-md drop-shadow-md flex-wrap w-full h-60 md:w-96 md:h-full`,children:r.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:r.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})}),r.jsxs("div",{className:`${e?void 0:"hidden"} flex flex-col justify-center items-center bg-stone-100 rounded-md drop-shadow-md flex-wrap w-full h-full md:w-96`,children:[r.jsx("div",{className:"pt-3 text-xl text-stone-700",children:x===2&&!g&&!s&&(f?r.jsx("h4",{className:"text-center",children:"Turn of player 2"}):r.jsx("h4",{className:"text-center",children:"Turn of player 1"}))}),r.jsx(Q,{question:e==null?void 0:e.question}),r.jsx(M,{question:e,nextB:s,setNextB:n,block:c,setBlock:o,setCorrect:d,setP1Score:a,setP2Score:i,setP1Lifes:w,p1Lifes:h,setP2Lifes:p,p2Lifes:m,playing:f,setPlaying:u,setLose:j,mode:x})]})]})},y={correctBg:"bg-green-300 border-2 border-green-500 text-green-700 rounded-md mt-2 drop-shadow-md flex flex-col items-center text-center",incorrectBg:"bg-red-300 border-2 border-red-500 text-red-700 rounded-md mt-2 drop-shadow-md flex flex-col items-center text-center",correctButton:"bg-green-500 text-green-100 rounded-md p-1 m-2 hover:bg-green-400",incorrectButton:"bg-red-500 text-red-100 rounded-md p-1 m-2 hover:bg-red-400"},F=()=>{const{nextB:e,setNextB:s,setBlock:n,correct:c}=L(),{question:o,setQuestion:d,getQuestion:a,config:i}=B(),h=()=>{e&&d(null),e&&a(i==null?void 0:i.url),s(!1),n(!1)};return r.jsx("div",{className:`${e?void 0:"hidden"} md:row-start-3 md:row-end-4 md:col-span-3 md:text-2xl`,children:r.jsxs("div",{className:c?y.correctBg:y.incorrectBg,children:[r.jsx("div",{children:e&&(c?r.jsx("h2",{className:"text-2xl",children:"You are correct"}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl",children:"You are not correct"}),r.jsxs("h2",{children:["The answer is ",N(o==null?void 0:o.correct_answer)]})]}))}),r.jsx("div",{children:e&&r.jsx("button",{className:c?y.correctButton:y.incorrectButton,onClick:h,children:"Next Button"})})]})})},H=({player:e,className:s})=>{const{num:n,pScore:c,pLifes:o}=e;return r.jsxs("div",{className:s,children:[r.jsxs("h2",{className:"border-b-2 border-b-gray-400",children:["Player ",n]}),r.jsxs("h2",{className:"md:pt-5",children:["Score: ",c]}),r.jsxs("h2",{className:"",children:["Lifes: ",o]})]})},T=l.memo(H),V=()=>{const{p1Lifes:e,p1Score:s,p2Lifes:n,p2Score:c}=L(),{config:o}=B(),d={num:1,pScore:s,pLifes:e},a={num:2,pScore:c,pLifes:n};return r.jsxs("div",{className:"grid grid-cols-2 items-center gap-3 w-full h-full text-xl md:grid-cols-1 md:grid-rows-4 md:w-60 md:text-2xl md:gap-y-6",children:[r.jsx(T,{player:d,className:"flex flex-col items-center justify-center bg-stone-100 rounded-md drop-shadow-lg p-2 md:row-start-1 md:row-span-2 md:h-full"}),+o.mode==2&&r.jsx(T,{player:a,className:"flex flex-col items-center justify-center bg-stone-100 rounded-md drop-shadow-lg p-2 md:row-start-3 md:row-span-2 md:h-full"})]})},$=l.createContext(),L=()=>l.useContext($),I=()=>{const{question:e,config:s}=B(),[n,c]=l.useState(!1),[o,d]=l.useState(!1),[a,i]=l.useState(!1),[h,w]=l.useState(0),[m,p]=l.useState(0),[f,u]=l.useState(5),[g,j]=l.useState(5),[x,v]=l.useState(!1),[t,b]=l.useState(!1);return r.jsx(l.Suspense,{children:r.jsx($.Provider,{value:{question:e,nextB:n,setNextB:c,correct:o,setCorrect:d,block:a,setBlock:i,p1Score:h,setP1Score:w,p2Score:m,setP2Score:p,p1Lifes:f,setP1Lifes:u,p2Lifes:g,setP2Lifes:j,playing:x,setPlaying:v,lose:t,setLose:b},children:r.jsxs("div",{className:"grid grid-flow-row items-center justify-center gap-x-3 gap-y-3 md:grid-flow-col md:grid-col-2 md:gap-x-6 md:gap-y-0",children:[r.jsx(R,{}),r.jsx(F,{}),r.jsx(V,{}),r.jsxs("div",{className:"flex flex-col justify-center items-center bg-stone-100 rounded-md drop-shadow-md mb-8",children:[t&&s.mode===2&&(x?r.jsx("h4",{className:"text-red-500",children:"Player 1 loses"}):r.jsx("h4",{className:"text-red-500",children:"Player 2 loses"})),t&&s.mode===1&&r.jsx("h4",{className:"text-red-500",children:"Player 1 loses"}),t&&r.jsxs("h2",{children:["The answer is ",N(e==null?void 0:e.correct_answer)]}),t&&s.mode===2&&(x?r.jsx("h4",{className:"text-green-500",children:"Player 2 wins"}):r.jsx("h4",{className:"text-green-500",children:"Player 1 wins"}))]})]})})})};export{I as default,L as useTriviaContext};
