import{r as l,j as t}from"./index-668fd4ec.js";import{useGameContext as L}from"./Game-844f602a.js";const N=e=>{const r=document.createElement("div");return r.innerHTML=e,r.textContent};const _=({question:e})=>t.jsx("div",{className:"question",children:t.jsx("h2",{className:"m-5 flex justify-center align-center text-center",children:e&&N(e)})}),Q=l.memo(_),C=e=>Math.floor(Math.random()*e),$=e=>{const r=new Set,n=[];for(let c=0;c<e.length;c++){let o=C(e.length);for(;r.has(o);)o=C(e.length);r.add(o),n.push(e[o])}return n};let B=[],S=["yellow","lime","cyan","rose"];const A={yellow:"bg-yellow-500 text-yellow-900 hover:bg-yellow-300",lime:"bg-lime-500 text-lime-900 hover:bg-lime-300",cyan:"bg-cyan-500 text-cyan-900 hover:bg-cyan-300",rose:"bg-rose-500 text-rose-900 hover:bg-rose-300"},E=()=>{const{question:e,nextB:r,setNextB:n,block:c,setBlock:o,setCorrect:a,setP1Score:d,setP2Score:i,setP1Lifes:h,setP2Lifes:f,playing:x,setPlaying:p,setLose:g,mode:u}=v();B=r?B:e&&$([...e.incorrect_answers,e.correct_answer]),S=r?S:e&&$(["yellow","lime","cyan","rose"]);const j=()=>{g(!0),n(!1)},y=()=>{a(!0),o(!0),x===!1&&d(s=>s+1),u===2&&x===!0&&i(s=>s+1),u===2&&p(!x),n(!0)},m=()=>{a(!1),o(!0),u===2&&p(!x),x?f(s=>(s=s-1,s>0?n(!0):j(),s)):h(s=>(s=s-1,s>0?n(!0):j(),s))},P=s=>{s===(e==null?void 0:e.correct_answer)&&!c&&y(),s!==(e==null?void 0:e.correct_answer)&&!c&&m()};return t.jsx("div",{className:"grid grid-cols-2 items-end",children:e&&B.map((s,b)=>t.jsx(M,{className:`drop-shadow-md min-wit-full rounded-md px-4 m-3 h-5/6 ${A[S[b]]} md:text-lg sm:text-xl md:p-6`,change:P,answ:s},b))})},M=({className:e,change:r,answ:n})=>t.jsx("button",{className:e,onClick:()=>r(n),children:N(n)}),R=l.memo(E),F=()=>{const{question:e,nextB:r,setNextB:n,block:c,setBlock:o,setCorrect:a,setP1Score:d,setP2Score:i,p1Lifes:h,setP1Lifes:f,p2Lifes:x,setP2Lifes:p,playing:g,setPlaying:u,lose:j,setLose:y,mode:m}=v();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${e?"hidden":void 0} flex flex-col justify-center items-center rounded-md drop-shadow-md flex-wrap w-full h-60 md:w-96 md:h-full`,children:[t.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-900 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status"}),t.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})]}),t.jsxs("div",{className:`${e?void 0:"hidden"}`,children:[t.jsx("div",{className:"text-xl text-purple-900",children:m===2&&!j&&!r&&(g?t.jsx("h4",{className:"text-center",children:"Turn of player 2"}):t.jsx("h4",{className:"text-center",children:"Turn of player 1"}))}),t.jsx(Q,{question:e==null?void 0:e.question}),t.jsx(R,{question:e,nextB:r,setNextB:n,block:c,setBlock:o,setCorrect:a,setP1Score:d,setP2Score:i,setP1Lifes:f,p1Lifes:h,setP2Lifes:p,p2Lifes:x,playing:g,setPlaying:u,setLose:y,mode:m})]})]})},w={correctBg:"bg-green-300 border-2 border-green-500 text-green-700 rounded-md mt-2 drop-shadow-md flex flex-col items-center text-center",incorrectBg:"bg-red-300 border-2 border-red-500 text-red-700 rounded-md mt-2 drop-shadow-md flex flex-col items-center text-center",correctButton:"bg-green-500 text-green-100 rounded-md p-1 m-2 hover:bg-green-400",incorrectButton:"bg-red-500 text-red-100 rounded-md p-1 m-2 hover:bg-red-400"},H=()=>{const{nextB:e,setNextB:r,setBlock:n,correct:c}=v(),{question:o,setQuestion:a,getQuestion:d,config:i}=L(),h=()=>{e&&a(null),e&&d(i==null?void 0:i.url),r(!1),n(!1)};return t.jsx("div",{className:`${e?void 0:"hidden"} md:row-start-2 md:row-end-2 md:col-span-2 md:text-2xl ml-6 mr-6`,children:t.jsxs("div",{className:c?w.correctBg:w.incorrectBg,children:[t.jsx("div",{children:e&&(c?t.jsx("h2",{className:"text-2xl",children:"You are correct"}):t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-2xl",children:"You are not correct"}),t.jsxs("h2",{children:["The answer is ",N(o==null?void 0:o.correct_answer)]})]}))}),t.jsx("div",{children:e&&t.jsx("button",{className:c?w.correctButton:w.incorrectButton,onClick:h,children:"Next Button"})})]})})},V=({player:e,className:r})=>{const{num:n,pScore:c,pLifes:o}=e;return t.jsxs("div",{className:r,children:[t.jsxs("h2",{className:"border-b-2 border-b-gray-400",children:["Player ",n]}),t.jsxs("h2",{className:"md:pt-5",children:["Score: ",c]}),t.jsxs("h2",{className:"",children:["Lifes: ",o]})]})},k=l.memo(V);const Y=()=>{const{p1Lifes:e,p1Score:r,p2Lifes:n,p2Score:c}=v(),{config:o}=L(),a={num:1,pScore:r,pLifes:e},d={num:2,pScore:c,pLifes:n};return t.jsxs("div",{className:"container-player",children:[t.jsx(k,{player:a,className:"player-box"}),+o.mode==2&&t.jsx(k,{player:d,className:"player-box"})]})};const T=l.createContext(),v=()=>l.useContext(T),I=()=>{const{question:e,config:r}=L(),[n,c]=l.useState(!1),[o,a]=l.useState(!1),[d,i]=l.useState(!1),[h,f]=l.useState(0),[x,p]=l.useState(0),[g,u]=l.useState(5),[j,y]=l.useState(5),[m,P]=l.useState(!1),[s,b]=l.useState(!1);return t.jsx(l.Suspense,{children:t.jsx(T.Provider,{value:{question:e,nextB:n,setNextB:c,correct:o,setCorrect:a,block:d,setBlock:i,p1Score:h,setP1Score:f,p2Score:x,setP2Score:p,p1Lifes:g,setP1Lifes:u,p2Lifes:j,setP2Lifes:y,playing:m,setPlaying:P,lose:s,setLose:b,mode:+r.mode},children:t.jsxs("div",{className:"container-trivia",children:[t.jsx(F,{}),t.jsx(H,{}),t.jsx(Y,{}),t.jsxs("div",{className:`${s?void 0:"hidden"} flex flex-col justify-center items-center bg-stone-100 rounded-md drop-shadow-md mb-8`,children:[s&&r.mode===2&&(m?t.jsx("h4",{className:"text-red-500",children:"Player 1 loses"}):t.jsx("h4",{className:"text-red-500",children:"Player 2 loses"})),s&&r.mode===1&&t.jsx("h4",{className:"text-red-500",children:"Player 1 loses"}),s&&t.jsxs("h2",{children:["The answer is ",N(e==null?void 0:e.correct_answer)]}),s&&r.mode===2&&(m?t.jsx("h4",{className:"text-green-500",children:"Player 2 wins"}):t.jsx("h4",{className:"text-green-500",children:"Player 1 wins"}))]})]})})})};export{I as default,v as useTriviaContext};
